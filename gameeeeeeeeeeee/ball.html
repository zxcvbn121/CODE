<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        Ball.prototype.collide = function(rect) {
    if(!this.running)
        return;
    var p = { x: this.cx, y: this.cy};
 
    if(p.x < rect.left)
        p.x = rect.left;
    else if(p.x > rect.right)
        p.x = rect.right;
 
    if(p.y < rect.top)
        p.y = rect.top;
    else if(p.y > rect.bottom)
        p.y = rect.bottom;
 
    var dx = this.cx - p.x;
    var dy = this.cy - p.y;
 
    var isCollided = (dx*dx + dy*dy) <= this.radius*this.radius;
 
    if(isCollided)
    {
        if(p.x == rect.left || p.x == rect.right)
            this.speedX = -this.speedX;
 
        if(p.y == rect.top || p.y == rect.bottom)
            this.speedY = -this.speedY;
    }
    return isCollided;
}
function Rect(left, top, width, height,color) {
    this.MAX_SPEED = 4;
    this.width = width;
    this.height = height;
 
    this.left = left;
    this.top = top;
    this.right = this.left + width;
    this.bottom = this.top + height;
 
    this.color = color;
}
Rect.prototype.moveTo = function(x) {
 
    this.left = x - this.width/2;
 
    this.right = this.left + this.width;
}
 
Rect.prototype.draw = function(context) {
    context.fillStyle = this.color;
    context.fillRect(this.left, this.top, this.width, this.height);
}
 
// ...
function canvas_mousemove(e) {
    var x = e.pageX - _canvas.offsetLeft;
 
    _paddle.moveTo(x);
}
var BRICK_WIDTH = 40;
var BRICK_HEIGHT = 20;
var BRICK_ROWS = 3;
var BRICK_COLS = 8;
 
// init bricks
_bricks = new Array(BRICK_ROWS);
 for (var i=0; i < BRICK_ROWS; i++) {
    _bricks[i] = new Array(BRICK_COLS);
    for (var j=0; j < BRICK_COLS; j++) {
      _bricks[i][j] = new Rect(j*(BRICK_WIDTH+5)+10, i*(BRICK_HEIGHT+5)+10,BRICK_WIDTH,BRICK_HEIGHT,"blue");
    }
 }
 for (var i=0; i < BRICK_ROWS; i++) {
    for (var j=0; j < BRICK_COLS; j++) {
        if(_bricks[i][j])
            _bricks[i][j].draw(_context);
    }
}
for (var i=0; i < BRICK_ROWS; i++) {
    for (var j=0; j < BRICK_COLS; j++) {
      if(_bricks[i][j] && _ball.collide(_bricks[i][j]))
            _bricks[i][j] = null;
    }
}
    </script>
</body>
</html>